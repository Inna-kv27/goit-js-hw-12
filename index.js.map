{"version":3,"file":"index.js","sources":["../src/js/pixabay-api.js","../src/js/render-functions.js","../src/main.js"],"sourcesContent":["import axios from 'axios';\n\nconst API_KEY = '48880683-c6af76fdc924f93949198cfc6';\nconst BASE_URL = 'https://pixabay.com/api/';\n\nexport async function fetchImages(query, page, perPage) {\n  try {\n    const response = await axios.get(BASE_URL, {\n      params: {\n        key: API_KEY,\n        q: query,\n        image_type: 'photo',\n        orientation: 'horizontal',\n        safesearch: true,\n        page: page,\n        per_page: perPage,\n      },\n    });\n    return response.data;\n  } catch (error) {\n    console.error('Error fetching images:', error);\n    throw error;\n  }\n}\n","import SimpleLightbox from 'simplelightbox';\nimport 'simplelightbox/dist/simple-lightbox.min.css';\n\nconst gallery = document.querySelector('.gallery');\nlet lightbox = new SimpleLightbox('.gallery a', {\n  /* your options */\n});\n\nexport function renderImages(images) {\n  const markup = images\n    .map(\n      ({\n        webformatURL,\n        largeImageURL,\n        tags,\n        likes,\n        views,\n        comments,\n        downloads,\n      }) => `\n      <li class=\"gallery-item\">\n        <a href=\"${largeImageURL}\">\n          <img class=\"gallery-image\" src=\"${webformatURL}\" alt=\"${tags}\" loading=\"lazy\">\n        </a>\n        <div class=\"info\">\n          <p><b>Likes:</b> ${likes}</p>\n          <p><b>Views:</b> ${views}</p>\n          <p><b>Comments:</b> ${comments}</p>\n          <p><b>Downloads:</b> ${downloads}</p>\n        </div>\n      </li>\n    `\n    )\n    .join('');\n\n  gallery.insertAdjacentHTML('beforeend', markup);\n  lightbox.refresh();\n}\n\nexport function clearGallery() {\n  gallery.innerHTML = '';\n}\n\nexport function getCardHeight() {\n  const card = document.querySelector('.gallery-item');\n  return card ? card.getBoundingClientRect().height : 0;\n}\n","import iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\nimport { fetchImages } from './js/pixabay-api.js';\nimport {\n  renderImages,\n  clearGallery,\n  getCardHeight,\n} from './js/render-functions.js';\n\nconst form = document.getElementById('search-form');\nconst gallery = document.querySelector('.gallery');\nconst loadMoreButton = document.createElement('button');\nloadMoreButton.textContent = 'Load more';\nloadMoreButton.classList.add('load-more');\ngallery.after(loadMoreButton);\nconst loader = document.getElementById('loader');\nconst loadingText = document.getElementById('loading-text');\nconst endMessage = document.createElement('p');\nendMessage.textContent =\n  \"We're sorry, but you've reached the end of search results.\";\nendMessage.style.display = 'none';\ngallery.after(endMessage);\n\nlet searchQuery = '';\nlet page = 1;\nconst perPage = 40;\nlet totalHits = 0;\n\nloadMoreButton.style.display = 'none';\n\nform.addEventListener('submit', handleSubmit);\nloadMoreButton.addEventListener('click', handleLoadMore);\n\nasync function handleSubmit(event) {\n  event.preventDefault();\n  searchQuery = event.target.elements.searchQuery.value.trim();\n  page = 1;\n  totalHits = 0;\n  endMessage.style.display = 'none';\n\n  if (!searchQuery) {\n    iziToast.error({ title: 'Error', message: 'Please enter a search query.' });\n    return;\n  }\n\n  gallery.innerHTML = '';\n  loadMoreButton.style.display = 'none';\n  loader.style.display = 'block';\n  loadingText.style.display = 'block';\n\n  try {\n    const data = await fetchImages(searchQuery, page, perPage);\n    totalHits = data.totalHits;\n    if (data.hits.length === 0) {\n      iziToast.info({\n        title: 'Info',\n        message:\n          'Sorry, there are no images matching your search query. Please try again!',\n      });\n    } else {\n      renderImages(data.hits);\n      if (data.hits.length === perPage && totalHits > perPage) {\n        loadMoreButton.style.display = 'block';\n      }\n    }\n  } catch (error) {\n    console.error('Error fetching images:', error);\n    iziToast.error({\n      title: 'Error',\n      message: 'Failed to fetch images. Please try again later.',\n    });\n  } finally {\n    loader.style.display = 'none';\n    loadingText.style.display = 'none';\n    event.target.reset();\n  }\n}\n\nasync function handleLoadMore() {\n  page++;\n  loadMoreButton.style.display = 'none';\n  loader.style.display = 'block';\n  loadingText.style.display = 'block';\n\n  try {\n    const data = await fetchImages(searchQuery, page, perPage);\n    if (\n      data.hits.length === 0 ||\n      (page - 1) * perPage + data.hits.length === totalHits\n    ) {\n      loadMoreButton.style.display = 'none';\n      endMessage.style.display = 'block';\n    } else {\n      renderImages(data.hits);\n      loadMoreButton.style.display = 'block';\n    }\n    const cardHeight = getCardHeight();\n    window.scrollBy({\n      top: cardHeight * 2,\n      left: 0,\n      behavior: 'smooth',\n    });\n  } catch (error) {\n    console.error('Error fetching images:', error);\n    iziToast.error({\n      title: 'Error',\n      message: 'Failed to fetch images. Please try again later.',\n    });\n  } finally {\n    loader.style.display = 'none';\n    loadingText.style.display = 'none';\n  }\n}\n"],"names":["API_KEY","BASE_URL","fetchImages","query","page","perPage","axios","error","gallery","lightbox","SimpleLightbox","renderImages","images","markup","webformatURL","largeImageURL","tags","likes","views","comments","downloads","getCardHeight","card","form","loadMoreButton","loader","loadingText","endMessage","searchQuery","totalHits","handleSubmit","handleLoadMore","event","iziToast","data","cardHeight"],"mappings":"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"}